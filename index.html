<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>上课记录</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h2>上课记录</h2>
    <table id="classTable">
        <thead>
            <tr>
                <th>序号</th>
                <th>日期</th>
                <th>课程内容</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <br>
    <button onclick="addRow()">添加记录</button>
    <button onclick="saveData()">保存数据</button>

    <script>
        let count = 1;

        function addRow(date = '', content = '') {
            let table = document.getElementById("classTable").getElementsByTagName('tbody')[0];
            let newRow = table.insertRow();

            let cell1 = newRow.insertCell(0);
            let cell2 = newRow.insertCell(1);
            let cell3 = newRow.insertCell(2);
            let cell4 = newRow.insertCell(3);
            
            cell1.innerText = count++;
            cell2.innerHTML = `<input type="date" value="${date}">`;
            cell3.innerHTML = `<input type="text" placeholder="输入课程内容" value="${content}">`;
            cell4.innerHTML = '<button onclick="deleteRow(this)">删除</button>';
        }

        function deleteRow(button) {
            let row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
            count--; 
        }

        function saveData() {
            let table = document.getElementById("classTable").getElementsByTagName('tbody')[0];
            let rows = table.getElementsByTagName('tr');
            let data = [];
            for (let i = 0; i < rows.length; i++) {
                let cells = rows[i].getElementsByTagName('td');
                let date = cells[1].getElementsByTagName('input')[0].value;
                let content = cells[2].getElementsByTagName('input')[0].value;
                data.push({ date, content });
            }
            localStorage.setItem('classData', JSON.stringify(data));
        }

        function loadData() {
            let storedData = localStorage.getItem('classData');
            if (storedData) {
                let data = JSON.parse(storedData);
                data.forEach((entry, index) => addRow(entry.date, entry.content));
            }
        }

        window.onload = loadData;
    </script>
    
    <h3>使用示例</h3>
    <p>1. 点击“添加记录”按钮，会在表格中新增一行，包括日期输入框和课程内容输入框。</p>
    <p>2. 在新增行中选择日期并输入课程内容。</p>
    <p>3. 若需删除某行，可点击该行对应的“删除”按钮。</p>
    <p>4. 点击“保存数据”按钮，可将当前输入的数据存入浏览器本地存储，页面刷新后仍可查看。</p>
</body>
</html>
